{"version":3,"sources":["webpack:///src/app/profile/profile.module.ts","webpack:///src/app/profile/profile.page.ts","webpack:///src/app/profile/profile.page.html","webpack:///src/app/profile/profile-routing.module.ts","webpack:///src/app/profile/profile.page.scss"],"names":["ProfilePageModule","imports","declarations","ProfilePage","router","authServices","alertCtrl","accountService","fb","usePicker","regform","group","getAccount","getAllAccount","subscribe","res","listOfAccount","base64textString","find","c","id","localStorage","getItem","photo","fullName","FullName","navigate","setItem","navigateByUrl","error","create","message","buttons","text","role","alert","present","filePickerRef","nativeElement","click","Camera","getPhoto","quality","source","Prompt","correctOrientation","height","width","resultType","Base64","then","image","base64String","accounts","data","email","phonenumber","password","FirstTimeLocation","locationId","active","type","updateAccount","console","log","event","pickedFile","target","files","fr","FileReader","onload","dataUrl","result","toString","readAsDataURL","selector","template","routes","path","component","ProfilePageRoutingModule","forChild","exports"],"mappings":"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","file":"profile-profile-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePageRoutingModule } from './profile-routing.module';\n\nimport { ProfilePage } from './profile.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProfilePageRoutingModule\n  ],\n  declarations: [ProfilePage]\n})\nexport class ProfilePageModule {}\n","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { Plugins, CameraSource, CameraResultType } from '@capacitor/core';\nimport { Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { Account } from 'src/Table/table';\nimport { AccountService } from '../Service/account.service';\nimport { AuthService } from '../Service/auth.service';\nimport { FormBuilder } from '@angular/forms';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.page.html',\n  styleUrls: ['./profile.page.scss'],\n})\nexport class ProfilePage implements OnInit {\n  @ViewChild('filePicker', { static: false }) filePickerRef: ElementRef<HTMLInputElement>;\n  usePicker = false;\n  regform = this.fb.group({});\n  base64textString: string;\n  photo: string;\n  listOfAccount: Account[];\n  fullName:string\n  constructor(private router: Router, private authServices: AuthService,\n    private alertCtrl: AlertController, private accountService: AccountService,\n    private fb: FormBuilder) { }\n\n  ngOnInit() {\n    this.getAccount();\n  }\n  getAccount() {\n    this.accountService.getAllAccount().subscribe(res => {\n      this.listOfAccount = res;\n      this.base64textString = res.find(c => c.id == localStorage.getItem(\"userId\")).photo;\n      this.fullName = res.find(c=>c.id==localStorage.getItem(\"userId\")).FullName\n    })\n  }\n  account() {\n    this.router.navigate([\"/account-details\"]);\n  }\n  setting() {\n    this.router.navigate([\"/setting\"]);\n  }\n  contact() {\n    this.router.navigate([\"/contact\"]);\n  }\n  async logout(): Promise<void> {\n      localStorage.setItem(\"userId\", null);\n      localStorage.setItem(\"fullName\", null);\n      localStorage.setItem(\"active\", null);\n      localStorage.setItem(\"roleType\", null);\n      this.router.navigateByUrl('login');\n      async error => {\n        const alert = await this.alertCtrl.create({\n          message: error.message,\n          buttons: [{ text: 'ok', role: 'cancel' }],\n        });\n        await alert.present();\n      }\n  }\n  onPickImage() {\n    if (this.usePicker == true) {\n      // if (!Capacitor.isPluginAvailable('Camera')) {\n      this.filePickerRef.nativeElement.click();\n      return;\n    }\n    Plugins.Camera.getPhoto({\n      quality: 50,\n      source: CameraSource.Prompt,\n      correctOrientation: true,\n      height: 100,\n      width: 100,\n      resultType: CameraResultType.Base64\n    })\n      .then(image => {\n        this.base64textString = 'data:image/png;base64,' + image.base64String;\n        let accounts = this.listOfAccount.find(c => c.id == +localStorage.getItem(\"userId\"));\n        let data = {\n          email: accounts.email,\n          phonenumber: accounts.phonenumber,\n          password: accounts.password,\n          FullName: accounts.fullName,\n          FirstTimeLocation: accounts.locationId,\n          active: accounts.active,\n          type: accounts.type,\n          photo: this.base64textString\n        }\n        this.accountService.updateAccount(data)\n      })\n      .catch(error => {\n        console.log(error);\n        if (this.usePicker) {\n          this.filePickerRef.nativeElement.click();\n        }\n        return false;\n      });\n  }\n  onFileChosen(event: Event) {\n    const pickedFile = (event.target as HTMLInputElement).files[0];\n    if (!pickedFile) {\n      return;\n    }\n    const fr = new FileReader();\n    fr.onload = () => {\n      const dataUrl = fr.result.toString();\n      this.base64textString = dataUrl;\n    };\n    fr.readAsDataURL(pickedFile);\n  }\n}\n","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Profile</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n<ion-grid style=\\\"margin-left: 90px;\\\">\\n     <ion-avatar style=\\\"height: 62px;\\n      width: 68px;\\\" class=\\\"ion-margin-start\\\" >\\n        <ion-img role=\\\"button\\\" class=\\\"image\\\" (click)=\\\"onPickImage()\\\" [src]=\\\"base64textString\\\"\\n        *ngIf=\\\"base64textString\\\"></ion-img>\\n      </ion-avatar>\\n       <ion-icon name=\\\"camera\\\" slot=\\\"start\\\"></ion-icon>\\n      <ion-label>{{this.fullName}}</ion-label>\\n      <ion-button color=\\\"primary\\\" (click)=\\\"onPickImage()\\\" *ngIf=\\\"!base64textString\\\">\\n        <ion-icon name=\\\"camera\\\" slot=\\\"start\\\"></ion-icon>\\n      </ion-button>\\n    <input hidden type=\\\"file\\\" accept=\\\"image/jpeg\\\" *ngIf=\\\"usePicker\\\" #filePicker (change)=\\\"onFileChosen($event)\\\" />\\n</ion-grid>\\n<ion-item lines=\\\"none\\\" (click)=\\\"account()\\\">\\n  <ion-icon color=\\\"primary\\\" name=\\\"person-outline\\\"></ion-icon><ion-label>&nbsp;&nbsp;&nbsp;Account details</ion-label>\\n</ion-item>\\n<ion-item lines=\\\"none\\\" (click)=\\\"setting()\\\">\\n  <ion-icon color=\\\"primary\\\" name=\\\"settings-outline\\\"></ion-icon><ion-label>&nbsp;&nbsp;&nbsp;Settings</ion-label>\\n</ion-item>\\n<ion-item lines=\\\"none\\\" (click)=\\\"contact()\\\">\\n  <ion-icon color=\\\"primary\\\" name=\\\"call-sharp\\\"></ion-icon><ion-label>&nbsp;&nbsp;&nbsp;Contact Us</ion-label>\\n</ion-item>\\n<ion-button (click)=\\\"logout()\\\">loginout</ion-button>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePage } from './profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePageRoutingModule {}\n","export default \"ion-button {\\n  margin-left: 100px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXHByb2ZpbGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQWtCO0FBQ3RCIiwiZmlsZSI6InByb2ZpbGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWJ1dHRvbntcclxuICAgIG1hcmdpbi1sZWZ0OiAxMDBweDtcclxufSJdfQ== */\";"]}
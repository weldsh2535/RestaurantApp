(window.webpackJsonp=window.webpackJsonp||[]).push([[3,17,18],{"+cje":function(t,e,i){"use strict";i.d(e,"a",function(){return c});var r=i("HDdC"),s=i("XEKg"),n=i("5Jak"),o=i("/GcI"),a=i("cxbk"),d=i("fXoL"),h=i("tk/3");let c=(()=>{class t{constructor(t){this.http=t,this.APIURL=a.a.apiURL}create(t){return this.http.post(this.APIURL+"/restaurant",t)}getAllRestaurant(){return this.http.get(this.APIURL+"/restaurant")}updateRestaurant(t){return this.http.put(this.APIURL+"/restaurant/",t)}removeRestaurant(t){return this.http.delete(this.APIURL+"/restaurant/"+t).toPromise()}handleError(t){return r.a.throw(400===t.status?new s.a(t.json()):404===t.status?new n.a:new o.a(t))}}return t.\u0275fac=function(e){return new(e||t)(d.cc(h.a))},t.\u0275prov=d.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"8D9V":function(t,e,i){"use strict";i.d(e,"a",function(){return c});var r=i("HDdC"),s=i("cxbk"),n=i("/GcI"),o=i("XEKg"),a=i("5Jak"),d=i("fXoL"),h=i("tk/3");let c=(()=>{class t{constructor(t){this.http=t,this.APIURL=s.a.apiURL}create(t){return this.http.post(this.APIURL+"/orderdetail",t)}getAllOrderDetail(){return this.http.get(this.APIURL+"/orderdetail")}updateOrderDetail(t){return this.http.put(this.APIURL+"/orderdetail/",t)}removeOrderDetail(t){return this.http.delete(this.APIURL+"/orderdetail/"+t).toPromise()}handleError(t){return r.a.throw(400===t.status?new o.a(t.json()):404===t.status?new a.a:new n.a(t))}}return t.\u0275fac=function(e){return new(e||t)(d.cc(h.a))},t.\u0275prov=d.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"Dkj+":function(t,e,i){"use strict";i.d(e,"a",function(){return c});var r=i("HDdC"),s=i("cxbk"),n=i("/GcI"),o=i("XEKg"),a=i("5Jak"),d=i("fXoL"),h=i("tk/3");let c=(()=>{class t{constructor(t){this.http=t,this.APIURL=s.a.apiURL}create(t){return this.http.post(this.APIURL+"/food",t)}getAllFood(){return this.http.get(this.APIURL+"/food")}updateFood(t){return this.http.put(this.APIURL+"/food/",t)}removeFood(t){return this.http.delete(this.APIURL+"/food/"+t).toPromise()}handleError(t){return r.a.throw(400===t.status?new o.a(t.json()):404===t.status?new a.a:new n.a(t))}}return t.\u0275fac=function(e){return new(e||t)(d.cc(h.a))},t.\u0275prov=d.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},VNSQ:function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i("2Vo4"),s=i("HDdC"),n=i("/GcI"),o=i("XEKg"),a=i("5Jak"),d=i("cxbk"),h=i("fXoL"),c=i("tk/3"),u=i("ldse");let l=(()=>{class t{constructor(t,e){this.http=t,this.sharedService=e,this.cart=[],this.cartItemCount=new r.a(0),this.RestaurantId=new r.a({}),this.orderStatus=new r.a({}),this.order=[],this.orderItemCount=new r.a(0),this.APIURL=d.a.apiURL}create(t){return this.http.post(this.APIURL+"/order",t)}getAllOrder(){return this.http.get(this.APIURL+"/order")}updateOrder(t){return this.http.put(this.APIURL+"/order/",t)}updateOrderStatus(t){return this.http.put(this.APIURL+"/orderstatus/",t)}updateRestaurantStatus(t){return this.http.put(this.APIURL+"/restaurantstatus/",t)}updateStatus(t){return this.http.put(this.APIURL+"/status/",t)}removeOrder(t){return this.http.delete(this.APIURL+"/order/"+t).toPromise()}handleError(t){return s.a.throw(400===t.status?new o.a(t.json()):404===t.status?new a.a:new n.a(t))}getCart(){return this.cart}getOrders(){return this.order}getCartItemCount(){return this.cartItemCount}getOrderItemCount(){return this.orderItemCount}getRestaurantId(){return this.RestaurantId}getOrderStatus(){return this.orderStatus}addOrder(t){this.order=[],this.amount=0,this.order.forEach(t=>{let e=this.order.indexOf(e=>e.orderDetailsId===t.orderDetailsId);this.order.splice(e,1)}),this.orderItemCount.next(0),t.forEach(t=>{this.amount=this.amount+t.amount,this.order.push({CookingTime:t.CookingTime,DeliveryTime:t.DeliveryTime,Description:t.Description,Name:t.Name,Price:t.Price,amount:t.amount,categoryId:t.categoryId,id:t.Food,picture:t.picture,restaurantId:t.restaurantId,type:t.type,orderDetailsId:t.orderDetailsId})}),this.orderItemCount.next(this.orderItemCount.value+this.amount)}addProduct(t){let e=!1;for(let i of this.cart)if(i.id===t.id){i.amount+=1,e=!0;break}e||(t.amount=1,this.cart.push(t)),this.cartItemCount.next(this.cartItemCount.value+1)}decreaseProduct(t){for(let[e,i]of this.cart.entries())i.id===t.id&&(i.amount-=1,0==i.amount&&this.cart.splice(e,1));this.cartItemCount.next(this.cartItemCount.value-1)}removeProduct(t){for(let[e,i]of this.cart.entries())i.id===t.id&&(this.cartItemCount.next(this.cartItemCount.value-i.amount),this.cart.splice(e,1))}}return t.\u0275fac=function(e){return new(e||t)(h.cc(c.a),h.cc(u.a))},t.\u0275prov=h.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ldse:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r=i("2Vo4"),s=i("fXoL");let n=(()=>{class t{constructor(){this.restaurant=new r.a({}),this.status=new r.a({}),this.location=new r.a({}),this.orderId=new r.a({}),this.RestaurantLocation=new r.a({}),this.resId=new r.a({}),this.listOfCatagoryFilter=new r.a({})}getMenuFilter(){return this.listOfCatagoryFilter}getLocation(){return this.location}getStatus(){return this.status}getRestaurantLocation(){return this.RestaurantLocation}getRestaurantId(){return this.resId}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},qmIW:function(t,e,i){"use strict";i.r(e),i.d(e,"RestaurantHistoryPageModule",function(){return O});var r=i("ofXK"),s=i("3Pt+"),n=i("TEn/"),o=i("tyNb"),a=i("mrSG"),d=i("fXoL"),h=i("VNSQ"),c=i("6wYF"),u=i("8D9V"),l=i("Dkj+"),f=i("ldse"),m=i("+cje");function b(t,e){if(1&t&&(d.Vb(0,"div",14),d.Vb(1,"ion-grid",14),d.Vb(2,"ion-row",14),d.Vb(3,"ion-label",14),d.Ec(4),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&t){const t=d.ic();d.Eb(4),d.Fc(t.message)}}function g(t,e){if(1&t){const t=d.Wb();d.Vb(0,"ion-row",15),d.Vb(1,"ion-col",16),d.Vb(2,"ion-label"),d.Vb(3,"p",1),d.Ec(4),d.jc(5,"currency"),d.Ub(),d.Ub(),d.Vb(6,"ion-label"),d.Vb(7,"p"),d.Ec(8),d.jc(9,"date"),d.Ub(),d.Ub(),d.Vb(10,"ion-button",17),d.gc("click",function(){d.wc(t);const i=e.$implicit;return d.ic().viewOrder(i.id)}),d.Ec(11," view order "),d.Ub(),d.Vb(12,"ion-row",18),d.Vb(13,"ion-label",19),d.Ec(14,"Status"),d.Ub(),d.Vb(15,"ion-button",20),d.Ec(16," Ready to service "),d.Ub(),d.Ub(),d.Ub(),d.Vb(17,"ion-col",21),d.Vb(18,"ion-label"),d.Ec(19),d.Vb(20,"p"),d.Ec(21),d.Ub(),d.Vb(22,"span"),d.Vb(23,"ion-button",22),d.gc("click",function(){d.wc(t);const i=e.$implicit;return d.ic().location(i.CLocation)}),d.Rb(24,"ion-icon",23),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&t){const t=e.$implicit;d.Eb(4),d.Gc("Total : ",d.lc(5,4,t.Total,"ETB"),""),d.Eb(4),d.Fc(d.lc(9,7,t.DateTime,"short")),d.Eb(11),d.Gc(" ",t.Customer," "),d.Eb(2),d.Fc(t.PhoneNumber)}}const p=[{path:"",component:(()=>{class t{constructor(t,e,i,r,s,n,o,a,d){this.orderService=t,this.accountService=e,this.orderDetailsService=i,this.foodService=r,this.sharedService=s,this.router=n,this.loadingController=o,this.datepipe=a,this.restaurantService=d,this.cart=[],this.model={},this.date=new Date,this.increament=0,this.currentMonth=(new Date).getMonth()+1,this.currentYear=(new Date).getFullYear(),this.currentDate=(new Date).getDate()}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){this.loader=yield this.loadingController.create({message:"Getting Products ...",spinner:"bubbles",animated:!0}),yield this.loader.present().then(),this.model.startdate=new Date,this.searchdate(),this.getOrder(),this.getFood(),this.getOrderDetails(),this.getRestaurant()})}getRestaurant(){return Object(a.a)(this,void 0,void 0,function*(){this.restaurantService.getAllRestaurant().subscribe(t=>Object(a.a)(this,void 0,void 0,function*(){yield this.loader.present().then(),this.listOfRestaurant=yield t}),t=>Object(a.a)(this,void 0,void 0,function*(){yield this.loader.dismiss().then(),console.log(t)}))})}getOrderDetails(){return Object(a.a)(this,void 0,void 0,function*(){this.orderDetailsService.getAllOrderDetail().subscribe(t=>Object(a.a)(this,void 0,void 0,function*(){yield this.loader.dismiss().then(),this.listOfOrderDetails=yield t}),t=>Object(a.a)(this,void 0,void 0,function*(){yield this.loader.dismiss().then(),console.log(t)}))})}getFood(){return Object(a.a)(this,void 0,void 0,function*(){this.foodService.getAllFood().subscribe(t=>Object(a.a)(this,void 0,void 0,function*(){yield this.loader.dismiss().then(),this.listOfFood=yield t}),t=>Object(a.a)(this,void 0,void 0,function*(){yield this.loader.dismiss().then(),console.log(t)}))})}getOrder(){return Object(a.a)(this,void 0,void 0,function*(){this.orderService.getAllOrder().subscribe(t=>Object(a.a)(this,void 0,void 0,function*(){if(yield this.loader.dismiss().then(),this.UserId=localStorage.getItem("userId"),null!=this.listOfRestaurant){let e=this.listOfRestaurant.find(t=>t.accountId==this.UserId).id,i=yield t.filter(t=>t.restaurantId==e&&t.restaurantStatuses.find(t=>1==t.isChecked&&"ready to service"==t.val));i.length>0?(this.listOfOrder=[],i.forEach(t=>{this.accountService.getAllAccount().subscribe(e=>Object(a.a)(this,void 0,void 0,function*(){let i={id:t.id,DateTime:t.dateTime,Customer:yield e.find(e=>e.id==+t.customer).fullName,PhoneNumber:yield e.find(e=>e.id==+t.customer).phonenumber,CLocation:yield e.find(e=>e.id==+t.customer).locationId,RLocation:t.location,Location:t.location,restaurantStatus:t.restaurantStatuses,Total:t.total,Driver:t.driver,Vehicle:t.vehicle,orderLocation:t.orderLocation};this.listOfOrder.push(i)}))})):(this.massge=!0,this.message="no orders")}else this.getOrder()}),t=>Object(a.a)(this,void 0,void 0,function*(){yield this.loader.dismiss().then(),console.log(t)}))})}viewOrder(t){this.cart=[];let e=this.listOfOrder.find(e=>e.id==t).orderNo;this.listOfOrderDetails.filter(t=>t.OrderId==e).forEach(t=>{let e={CookingTime:this.listOfFood.find(e=>e.id==t.foodId).cookingTime,DeliveryTime:this.listOfFood.find(e=>e.id==t.foodId).deliveryTime,Description:this.listOfFood.find(e=>e.id==t.foodId).description,Name:this.listOfFood.find(e=>e.id==t.foodId).name,Price:this.listOfFood.find(e=>e.id==t.foodId).price,amount:t.qty,categoryId:this.listOfFood.find(e=>e.id==t.foodId).categoryId,id:t.foodId,picture:this.listOfFood.find(e=>e.id==t.foodId).picture,restaurantId:this.listOfFood.find(e=>e.id==t.foodId).restaurantId,type:this.listOfFood.find(e=>e.id==t.foodId).type,orderDetailsId:t.id,orderStatus:!0};this.cart.push(e)}),this.orderService.addOrder(this.cart),this.sharedService.status.next("restaurant-history"),this.router.navigate(["/menu/order-history"])}location(t){this.sharedService.status.next("restaurant-history"),this.sharedService.RestaurantLocation.next(t),this.router.navigate(["/menu/location"])}doRefresh(t){setTimeout(()=>{t.target.complete()},2e3)}searchdate(){console.log(this.model.startdate);let t=this.datepipe.transform(this.model.startdate,"yyyy,M,d");function e(t){var e=t.getDate()-t.getDay()+(0===t.getDay()?-6:1);return new Date(t.setDate(e))}function i(t){var e=t.getDate()-(t.getDay()-1)+6;return new Date(t.setDate(e))}var r=new Date(t);function s(t,e){const i=new Date(Number(t));return i.setDate(t.getDate()+e),i}this.startdateofweek=this.datepipe.transform(e(r)),this.startMonth=new Date(this.startdateofweek).getMonth()+1,this.startYear=new Date(this.startdateofweek).getFullYear(),this.startDate=new Date(this.startdateofweek).getDate(),console.log(this.startdateofweek),this.Enddateofweek=this.datepipe.transform(i(r)),this.endMonth=new Date(this.Enddateofweek).getMonth()+1,this.endYear=new Date(this.Enddateofweek).getFullYear(),this.endDate=new Date(this.Enddateofweek).getDate(),console.log(this.Enddateofweek);const n=new Date(e(r));this.mon=this.datepipe.transform(e(r),"EEEE, MMMM d"),this.Tuesday=this.datepipe.transform(s(n,1),"EEEE, MMMM d"),this.Wednedday=this.datepipe.transform(s(n,2),"EEEE, MMMM d"),this.Thruds=this.datepipe.transform(s(n,3),"EEEE, MMMM d"),this.Friday=this.datepipe.transform(s(n,4),"EEEE, MMMM d"),this.Sat=this.datepipe.transform(s(n,5),"EEEE, MMMM d"),this.Sun=this.datepipe.transform(i(r),"EEEE, MMMM d")}segmentChanged(t){"daily"==t.detail.value?this.scheduleOrder(this.currentDate,"daily"):"week"==t.detail.value?this.scheduleOrder(this.currentWeek,"week"):"month"==t.detail.value?this.scheduleOrder(this.currentMonth,"month"):"year"==t.detail.value&&this.scheduleOrder(this.currentYear,"year")}scheduleOrder(t,e){this.orderService.getAllOrder().subscribe(i=>Object(a.a)(this,void 0,void 0,function*(){yield this.loader.dismiss().then(),this.UserId=localStorage.getItem("userId");let r=this.listOfRestaurant.find(t=>t.accountId==this.UserId).id,s=i.filter(t=>t.restaurantId==r&&t.restaurantStatuses.find(t=>1==t.isChecked&&"ready to service"==t.val));s.length>0&&(this.listOfOrder=[],s.forEach(i=>{this.accountService.getAllAccount().subscribe(r=>{let s={id:i.id,DateTime:i.dateTime,Customer:r.find(t=>t.id==+i.customer).fullName,PhoneNumber:r.find(t=>t.id==+i.customer).phonenumber,CLocation:r.find(t=>t.id==+i.customer).locationId,RLocation:i.location,Location:i.location,restaurantStatus:i.restaurantStatuses,Total:i.total,Driver:i.driver,Vehicle:i.vehicle,orderLocation:i.orderLocation};const n=new Date(i.dateTime).getDate();this.orderMonth=new Date(i.dateTime).getMonth()+1,this.orderYear=new Date(i.dateTime).getFullYear(),this.orderDate=new Date(i.dateTime).getDate();const o=new Date(i.dateTime).getMonth()+1,a=new Date(i.dateTime).getFullYear();"daily"==e?(this.increament=0,t==n&&(this.increament=this.increament+1,this.listOfOrder.push(s),this.listOfOrder.sort((t,e)=>new Date(e.DateTime).getTime()-new Date(t.DateTime).getTime())),0==this.increament?(this.massge=!0,this.message="no orders in this date"):this.massge=!1):"week"==e?(this.increament=0,this.startDate<=this.orderDate&&this.startMonth==this.orderMonth&&this.startYear==this.orderYear&&this.endDate>=this.orderDate&&this.endMonth==this.orderMonth&&this.endYear==this.orderYear&&(this.increament=this.increament+1,this.listOfOrder.push(s),this.listOfOrder.sort((t,e)=>new Date(e.DateTime).getTime()-new Date(t.DateTime).getTime())),0==this.increament?(this.massge=!0,this.message="no orders in this weeks"):this.massge=!1):"month"==e?(this.increament=0,t==o&&(this.increament=this.increament+1,this.listOfOrder.push(s),this.listOfOrder.sort((t,e)=>new Date(e.DateTime).getTime()-new Date(t.DateTime).getTime())),0==this.increament?(this.massge=!0,this.message="no orders in this months"):this.massge=!1):"year"==e&&(this.increament=0,t==a&&(this.increament=this.increament+1,this.listOfOrder.push(s),this.listOfOrder.sort((t,e)=>new Date(e.DateTime).getTime()-new Date(t.DateTime).getTime())),0==this.increament?(this.massge=!0,this.message="no orders years"):this.massge=!1)})}))}),t=>Object(a.a)(this,void 0,void 0,function*(){yield this.loader.dismiss().then(),console.log(t)}))}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(h.a),d.Qb(c.a),d.Qb(u.a),d.Qb(l.a),d.Qb(f.a),d.Qb(o.g),d.Qb(n.S),d.Qb(r.f),d.Qb(m.a))},t.\u0275cmp=d.Kb({type:t,selectors:[["app-restaurant-history"]],decls:25,vars:4,consts:[[3,"translucent"],["color","primary"],["slot","start"],[2,"text-align","center"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[3,"ionChange"],["value","daily"],["value","week"],["value","month"],["value","year"],["class","message",4,"ngIf"],[1,"orders"],["class","ion-padding meal-row",4,"ngFor","ngForOf"],[1,"message"],[1,"ion-padding","meal-row"],["size","8",1,"border-bottom"],["fill","clear",2,"margin-top","-14px",3,"click"],[1,"status"],[2,"padding-top","9px","padding-left","5px"],["fill","clear",2,"margin-top","-1px"],["size","4",1,"border-bottom"],[3,"click"],["name","location-outline"]],template:function(t,e){1&t&&(d.Vb(0,"ion-header",0),d.Vb(1,"ion-toolbar",1),d.Vb(2,"ion-buttons",2),d.Rb(3,"ion-menu-button"),d.Ub(),d.Vb(4,"ion-title",3),d.Ec(5,"My orders"),d.Ub(),d.Ub(),d.Ub(),d.Vb(6,"ion-content",4),d.Vb(7,"ion-refresher",5),d.gc("ionRefresh",function(t){return e.doRefresh(t)}),d.Rb(8,"ion-refresher-content"),d.Ub(),d.Vb(9,"ion-segment",6),d.gc("ionChange",function(t){return e.segmentChanged(t)}),d.Vb(10,"ion-segment-button",7),d.Vb(11,"ion-label"),d.Ec(12,"Daily"),d.Ub(),d.Ub(),d.Vb(13,"ion-segment-button",8),d.Vb(14,"ion-label"),d.Ec(15,"Weekly"),d.Ub(),d.Ub(),d.Vb(16,"ion-segment-button",9),d.Vb(17,"ion-label"),d.Ec(18,"Monthly"),d.Ub(),d.Ub(),d.Vb(19,"ion-segment-button",10),d.Vb(20,"ion-label"),d.Ec(21,"Yearly"),d.Ub(),d.Ub(),d.Ub(),d.Cc(22,b,5,1,"div",11),d.Vb(23,"div",12),d.Cc(24,g,25,10,"ion-row",13),d.Ub(),d.Ub()),2&t&&(d.oc("translucent",!0),d.Eb(6),d.oc("fullscreen",!0),d.Eb(16),d.oc("ngIf",e.massge),d.Eb(2),d.oc("ngForOf",e.listOfOrder))},directives:[n.q,n.P,n.i,n.B,n.N,n.k,n.D,n.E,n.H,n.X,n.I,n.y,r.n,r.m,n.p,n.G,n.j,n.h,n.r],pipes:[r.d,r.f],styles:["ion-segment[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-left:165px}ion-row[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-top:19px;padding-left:107px}ion-grid[_ngcontent-%COMP%]{border-radius:9px;background-color:#f5f5f5;height:79px}ion-label[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-left:60px;padding-top:24px;text-align:center;font-size:28px;font-style:normal;font-family:cursive}ion-segment[_ngcontent-%COMP%]{position:sticky;top:calc(env(safe-area-inset-top) - 0px);z-index:2;background:#eee;box-shadow:0 9px 11px -15px transparent;display:flex;flex-direction:row;align-items:flex-end;border-bottom-right-radius:3px;border-bottom-left-radius:2px}"]}),t})()}];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({imports:[[o.j.forChild(p)],o.j]}),t})(),O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({imports:[[r.c,s.d,n.Q,v]]}),t})()}}]);